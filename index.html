<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="theme-color" content="#7c3aed">
	<title>ูุฑุงุดฺฏุฑ ุนฺฉุณ ูุฏุฑู</title>
	
	<!-- PWA Manifest -->
	<link rel="manifest" href="manifest.json">
	
	<!-- Favicon -->
	<link rel="icon" type="image/x-icon" href="icons/favicon.ico">
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
	
	<!-- Apple Touch Icon -->
	<link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
	
	<!-- Android Chrome Icon -->
	<link rel="icon" type="image/png" sizes="192x192" href="icons/android-chrome-192x192.png">
	
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<header class="app-header">
		<div class="brand">
			<span class="brand-logo">๐ผ๏ธ</span>
			<h1>ูุฑุงุดฺฏุฑ ุนฺฉุณ ูุฏุฑู</h1>
		</div>
		<div class="header-actions">
			<button id="undoBtn" class="icon-btn" title="ุจุงุฒฺฏุฑุฏุงู (Ctrl+Z)">โถ</button>
			<button id="redoBtn" class="icon-btn" title="ุงุนุงุฏู (Ctrl+Y)">โท</button>
			<button id="themeToggle" class="icon-btn" title="ุชุบุฑ ุชู">๐</button>
		</div>
	</header>

	<main class="app-main">
		<aside class="sidebar">
			<section class="panel">
				<div class="panel-header" data-target="#uploadPanel">ุจุงุฑฺฏุฐุงุฑ ุชุตูุฑ</div>
				<div id="uploadPanel" class="panel-body open">
					<div id="uploadArea" class="upload-area">
						<input type="file" id="fileInput" accept="image/*" hidden>
						<div class="upload-icon">๐</div>
						<p>ุจุฑุง ุงูุชุฎุงุจ ฺฉูฺฉ ฺฉูุฏ ุง ูุงู ุฑุง ุจฺฉุดุฏ ู ุฑูุง ฺฉูุฏ</p>
					</div>
					<div class="meta">
						<div id="metaDimensions">ุงุจุนุงุฏ: -</div>
						<div id="metaSize">ุญุฌู ุชูุฑุจ: -</div>
					</div>
				</div>
			</section>

			<section class="panel">
				<div class="panel-header" data-target="#adjustPanel">ุชูุธูุงุช ุชุตูุฑ</div>
				<div id="adjustPanel" class="panel-body">
					<div class="control">
						<label for="brightness">ุณุทูุน <span id="brightnessVal">100%</span></label>
						<input type="range" id="brightness" min="0" max="200" value="100">
					</div>
					<div class="control">
						<label for="contrast">ฺฉูุชุฑุงุณุช <span id="contrastVal">100%</span></label>
						<input type="range" id="contrast" min="0" max="200" value="100">
					</div>
					<div class="control">
						<label for="saturation">ุงุดุจุงุน ุฑูฺฏ <span id="saturationVal">100%</span></label>
						<input type="range" id="saturation" min="0" max="200" value="100">
					</div>
					<div class="control">
						<label for="blur">ุชุงุฑ <span id="blurVal">0px</span></label>
						<input type="range" id="blur" min="0" max="20" value="0">
					</div>
					<div class="control">
						<label for="hue">Hue <span id="hueVal">0ยฐ</span></label>
						<input type="range" id="hue" min="-180" max="180" value="0">
					</div>
					<div class="control">
						<label for="sepia">Sepia <span id="sepiaVal">0%</span></label>
						<input type="range" id="sepia" min="0" max="100" value="0">
					</div>
					<button id="resetFiltersBtn" class="btn ghost">ุจุงุฒูุดุงู ููุชุฑูุง</button>
				</div>
			</section>

			<section class="panel">
				<div class="panel-header" data-target="#transformPanel">ุชุจุฏูโูุง</div>
				<div id="transformPanel" class="panel-body">
					<div class="control">
						<label for="rotate">ฺุฑุฎุด <span id="rotateVal">0ยฐ</span></label>
						<input type="range" id="rotate" min="-180" max="180" value="0">
					</div>
					<div class="btn-group">
						<button id="rotateLeftBtn" class="btn">โบ 90ยฐ</button>
						<button id="rotateRightBtn" class="btn">โป 90ยฐ</button>
					</div>
					<div class="btn-group">
						<button id="flipXBtn" class="btn ghost">โ ุจุฑุนฺฉุณ ุงูู</button>
						<button id="flipYBtn" class="btn ghost">โ ุจุฑุนฺฉุณ ุนููุฏ</button>
					</div>
					<div class="crop-section">
						<div class="section-title">ฺฉุฑุงูพ ุชุตูุฑ</div>
						<div class="btn-group">
							<button id="startCropBtn" class="btn warn">ุดุฑูุน ฺฉุฑุงูพ</button>
							<button id="applyCropBtn" class="btn success" disabled>ุงุนูุงู</button>
							<button id="cancelCropBtn" class="btn ghost" disabled>ูุบู</button>
						</div>
					</div>
				</div>
			</section>

			<section class="panel">
				<div class="panel-header" data-target="#resizePanel">ุชุบุฑ ุงุจุนุงุฏ</div>
				<div id="resizePanel" class="panel-body">
					<div class="resize-section">
						<div class="section-title">ุชุบุฑ ุงูุฏุงุฒู</div>
						<div class="input-group">
							<input id="resizeWidth" type="number" placeholder="ุนุฑุถ" min="1">
							<input id="resizeHeight" type="number" placeholder="ุทูู" min="1">
						</div>
						<div class="checkbox-row">
							<label class="checkbox"><input id="keepRatio" type="checkbox" checked> ุญูุธ ูุณุจุช</label>
						</div>
						<div class="preset-grid">
							<button class="chip" data-preset="1:1">1:1</button>
							<button class="chip" data-preset="4:3">4:3</button>
							<button class="chip" data-preset="16:9">16:9</button>
							<button class="chip" data-preset="9:16">9:16</button>
						</div>
						<div class="btn-group">
							<button id="applyResizeBtn" class="btn primary">ุงุนูุงู ุงุจุนุงุฏ</button>
							<button id="downloadResizeBtn" class="btn success">ุฏุงูููุฏ</button>
						</div>
					</div>
					
					<div class="divider"></div>
					
					<div class="multi-section">
						<div class="section-title">ุฎุฑูุฌ ฺูุฏุชุง</div>
						<div class="input-group">
							<input id="dimWidth" type="number" placeholder="ุนุฑุถ" min="1">
							<input id="dimHeight" type="number" placeholder="ุทูู" min="1">
							<button id="addDimBtn" class="btn ghost">ุงูุฒูุฏู</button>
						</div>
						<div class="checkbox-row">
							<label class="checkbox"><input id="keepRatioMulti" type="checkbox" checked> ุญูุธ ูุณุจุช</label>
						</div>
						<div id="dimList" class="dim-list"></div>
						<div class="btn-group">
							<button id="clearDimsBtn" class="btn ghost">ูพุงฺฉโฺฉุฑุฏู</button>
							<button id="exportMultiBtn" class="btn">ุฎุฑูุฌ ฺูุฏุชุง</button>
						</div>
					</div>
				</div>
			</section>

			<section class="panel">
				<div class="panel-header" data-target="#exportPanel">ฺฉูุช ู ุฎุฑูุฌ</div>
				<div id="exportPanel" class="panel-body">
					<div class="export-section">
						<div class="section-title">ุชูุธู ฺฉูุช</div>
						<div class="input-group">
							<input id="targetKB" type="number" placeholder="ุญุฌู ูุฏู (KB)" min="1">
							<button id="applyQualityBtn" class="btn ghost">ุงุนูุงู ฺฉูุช</button>
							<button id="downloadQualityBtn" class="btn success">ุฏุงูููุฏ ุจุง ฺฉูุช</button>
						</div>
					</div>
					
					<div class="divider"></div>
					
					<div class="export-section">
						<div class="section-title">ุฎุฑูุฌ ุงุตู</div>
						<div class="input-group">
							<label for="format">ูุฑูุช:</label>
							<select id="format">
								<option value="jpeg">JPG</option>
								<option value="png">PNG</option>
								<option value="webp">WEBP</option>
							</select>
						</div>
						<div class="btn-group">
							<button id="downloadBtn" class="btn primary">ุฏุงูููุฏ</button>
							<button id="resetAllBtn" class="btn ghost">ุจุงุฒูุดุงู ููู</button>
						</div>
					</div>
					
					<div class="divider"></div>
					
					<div class="export-section">
						<div class="section-title">ุงุจุฒุงุฑูุง</div>
						<div class="btn-group">
							<button id="testStorageBtn" class="btn ghost">ุชุณุช ุฐุฎุฑูโุณุงุฒ</button>
						</div>
					</div>
				</div>
			</section>
		</aside>

		<section class="stage">
			<div class="canvas-wrap" id="canvasWrap">
				<canvas id="canvas"></canvas>
				<div id="placeholder" class="placeholder">ุนฺฉุณ ุจุงุฑฺฏุฐุงุฑ ูุดุฏู ุงุณุช</div>
				<canvas id="cropOverlay" class="crop-overlay" hidden></canvas>
			</div>
		</section>
	</main>



	<script src="app.js"></script>
	
	<!-- Service Worker Registration -->
	<script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('./sw.js')
					.then(registration => {
						console.log('SW registered: ', registration);
					})
					.catch(registrationError => {
						console.log('SW registration failed: ', registrationError);
					});
			});
		}
	</script>
</body>
</html>
